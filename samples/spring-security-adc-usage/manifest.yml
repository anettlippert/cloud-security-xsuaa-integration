---
# Configuration:
# configured for EU10. For other landscapes, please adopt LANDSCAPE_APPS_DOMAIN in ../vars.yml
# If the route is occupied, you might need to change ID in ../vars.yml
applications:
- name: adc-user
  memory: 1G
  timeout: 360
  routes:
    - route: adc-user-1234.cfapps.sap.hana.ondemand.com
  path: target/spring-security-adc-usage.jar
  buildpacks:
    - https://github.com/saescha/opa-builpack-PoC.git
    - java_buildpack
  services:
    - uaa-bulletinboard
  env:
    ADC_URL: http://localhost:8181
    
    
# Application Router as web server
- name: approuter
  path: approuter
  buildpacks:
    - nodejs_buildpack
  memory: 128M
  routes:
    - route: approuter-1234.cfapps.sap.hana.ondemand.com
  services:
    - uaa-bulletinboard
  env:
    TENANT_HOST_PATTERN: "^(.*)-approuter-1234.cfapps.sap.hana.ondemand.com"
    destinations: >
      [
        {"name":"token-destination",
         "url":"https://adc-user-1234.cfapps.sap.hana.ondemand.com",
         "forwardAuthToken": true}
      ]

